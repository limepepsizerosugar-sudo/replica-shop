<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>명동사</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Gothic+A1:wght@400;500;600;700;900&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>
    
    <!-- React -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --black: #0a0a0a;
            --white: #ffffff;
            --gray-50: #fafafa;
            --gray-100: #f5f5f5;
            --gray-200: #eeeeee;
            --gray-300: #dddddd;
            --gray-400: #999999;
            --gray-600: #666666;
            --red: #d32f2f;
            --green: #2e7d32;
            --blue: #1976d2;
        }
        
        body { 
            font-family: 'Noto Sans KR', sans-serif;
            color: var(--black);
            background: var(--white);
            line-height: 1.6;
        }
        
        a { text-decoration: none; color: inherit; }
        button { font-family: inherit; cursor: pointer; border: none; background: none; }
        input, select, textarea { font-family: inherit; }
        
        /* Loading */
        .loading-screen {
            position: fixed;
            inset: 0;
            background: var(--white);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        
        .loading-logo {
            font-family: 'Gothic A1', sans-serif;
            font-size: 42px;
            font-weight: 900;
            margin-bottom: 30px;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--gray-200);
            border-top-color: var(--black);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin { to { transform: rotate(360deg); } }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--black);
            color: var(--white);
            padding: 15px 25px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 9999;
            animation: slideIn 0.3s ease;
        }
        .toast.error { background: var(--red); }
        .toast.success { background: var(--green); }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255,255,255,0.98);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .top-banner {
            background: var(--black);
            color: var(--white);
            text-align: center;
            padding: 10px;
            font-size: 12px;
            letter-spacing: 1px;
        }
        
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 50px;
            max-width: 1500px;
            margin: 0 auto;
        }
        
        .logo {
            font-family: 'Gothic A1', sans-serif;
            font-size: 30px;
            font-weight: 900;
            cursor: pointer;
        }
        
        .nav-menu {
            display: flex;
            gap: 35px;
        }
        
        .nav-link {
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            position: relative;
            padding: 5px 0;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--black);
            transition: width 0.3s;
        }
        
        .nav-link:hover::after,
        .nav-link.active::after {
            width: 100%;
        }
        
        .header-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .header-icon {
            position: relative;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: background 0.3s;
        }
        
        .header-icon:hover {
            background: var(--gray-100);
        }
        
        .header-icon svg {
            width: 22px;
            height: 22px;
            stroke-width: 1.5;
        }
        
        .icon-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--red);
            color: var(--white);
            font-size: 10px;
            font-weight: 700;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Hero */
        .hero {
            height: 80vh;
            min-height: 500px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--white);
            background: linear-gradient(rgba(0,0,0,0.35), rgba(0,0,0,0.5)), 
                        url('https://images.unsplash.com/photo-1519681393784-d120267933ba?w=1920&q=80');
            background-size: cover;
            background-position: center;
        }
        
        .hero-content { animation: fadeUp 1s ease; }
        
        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hero-subtitle {
            font-size: 13px;
            letter-spacing: 3px;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .hero-title {
            font-family: 'Gothic A1', sans-serif;
            font-size: 58px;
            font-weight: 900;
            line-height: 1.15;
            margin-bottom: 20px;
        }
        
        .hero-desc {
            font-size: 16px;
            opacity: 0.85;
            margin-bottom: 35px;
        }
        
        .btn-primary {
            display: inline-block;
            padding: 16px 45px;
            background: var(--white);
            color: var(--black);
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 1px;
            border: none;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .btn-outline {
            display: inline-block;
            padding: 16px 45px;
            border: 2px solid var(--black);
            background: transparent;
            color: var(--black);
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-outline:hover {
            background: var(--black);
            color: var(--white);
        }
        
        /* Section */
        .section {
            padding: 80px 50px;
            max-width: 1500px;
            margin: 0 auto;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 40px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--black);
        }
        
        .section-title {
            font-family: 'Gothic A1', sans-serif;
            font-size: 26px;
            font-weight: 900;
        }
        
        .view-all {
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Product Grid */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 35px 25px;
        }
        
        .product-card {
            cursor: pointer;
            position: relative;
        }
        
        .product-image {
            position: relative;
            aspect-ratio: 3/4;
            background: var(--gray-100);
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s;
        }
        
        .product-card:hover .product-image img {
            transform: scale(1.05);
        }
        
        .product-badge {
            position: absolute;
            top: 12px;
            left: 12px;
            background: var(--black);
            color: var(--white);
            padding: 5px 12px;
            font-size: 11px;
            font-weight: 700;
        }
        
        .product-wishlist {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 36px;
            height: 36px;
            background: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .product-wishlist.active {
            opacity: 1;
            color: var(--red);
        }
        
        .product-wishlist.active svg {
            fill: var(--red);
        }
        
        .product-card:hover .product-wishlist {
            opacity: 1;
        }
        
        .product-wishlist svg {
            width: 18px;
            height: 18px;
        }
        
        .product-brand {
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .product-name {
            font-size: 14px;
            color: var(--gray-600);
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .product-price {
            font-size: 15px;
            font-weight: 600;
        }
        
        .product-price .original {
            color: var(--gray-400);
            text-decoration: line-through;
            margin-right: 8px;
            font-weight: 400;
        }
        
        .product-price .sale {
            color: var(--red);
        }
        
        /* Category Section */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            padding: 0 50px;
            max-width: 1500px;
            margin: 0 auto 80px;
        }
        
        .category-card {
            position: relative;
            aspect-ratio: 4/5;
            overflow: hidden;
            cursor: pointer;
        }
        
        .category-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s;
        }
        
        .category-card:hover img {
            transform: scale(1.08);
        }
        
        .category-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.3);
            z-index: 1;
        }
        
        .category-content {
            position: absolute;
            bottom: 35px;
            left: 35px;
            z-index: 2;
            color: var(--white);
        }
        
        .category-name {
            font-family: 'Gothic A1', sans-serif;
            font-size: 26px;
            font-weight: 900;
            margin-bottom: 8px;
        }
        
        .category-count {
            font-size: 13px;
            opacity: 0.8;
        }
        
        /* Page Header */
        .page-header {
            background: var(--gray-50);
            padding: 50px;
            text-align: center;
        }
        
        .page-title {
            font-family: 'Gothic A1', sans-serif;
            font-size: 36px;
            font-weight: 900;
        }
        
        .page-desc {
            color: var(--gray-600);
            margin-top: 10px;
            font-size: 15px;
        }
        
        /* Filter Bar */
        .filter-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .filter-count {
            font-size: 14px;
            color: var(--gray-600);
        }
        
        .filter-sort select {
            padding: 10px 15px;
            border: 1px solid var(--gray-300);
            font-size: 14px;
            cursor: pointer;
        }
        
        /* Footer */
        .footer {
            background: var(--black);
            color: var(--white);
            padding: 70px 50px 35px;
        }
        
        .footer-content {
            max-width: 1500px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 50px;
            margin-bottom: 50px;
        }
        
        .footer-brand {
            font-family: 'Gothic A1', sans-serif;
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 15px;
        }
        
        .footer-desc {
            font-size: 14px;
            color: var(--gray-400);
            line-height: 1.8;
        }
        
        .footer-title {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 12px;
            font-size: 14px;
            color: var(--gray-400);
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .footer-links li:hover {
            color: var(--white);
        }
        
        .footer-bottom {
            max-width: 1500px;
            margin: 0 auto;
            padding-top: 35px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 12px;
            color: var(--gray-600);
            display: flex;
            justify-content: space-between;
        }
        
        /* Auth Page */
        .auth-page {
            min-height: calc(100vh - 200px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 60px 20px;
            background: var(--gray-50);
        }
        
        .auth-container {
            width: 100%;
            max-width: 420px;
            background: var(--white);
            padding: 50px 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }
        
        .auth-title {
            font-family: 'Gothic A1', sans-serif;
            font-size: 28px;
            font-weight: 900;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .auth-subtitle {
            text-align: center;
            color: var(--gray-600);
            font-size: 14px;
            margin-bottom: 35px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 14px;
            border: 1px solid var(--gray-300);
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--black);
        }
        
        .btn-submit {
            width: 100%;
            padding: 16px;
            background: var(--black);
            color: var(--white);
            font-size: 14px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: opacity 0.3s;
        }
        
        .btn-submit:hover { opacity: 0.85; }
        .btn-submit:disabled { opacity: 0.5; cursor: not-allowed; }
        
        .auth-link {
            text-align: center;
            margin-top: 25px;
            font-size: 14px;
            color: var(--gray-600);
        }
        
        .auth-link a {
            color: var(--black);
            font-weight: 600;
            cursor: pointer;
        }
        
        .auth-error {
            background: #ffebee;
            color: var(--red);
            padding: 12px;
            margin-bottom: 20px;
            font-size: 13px;
            text-align: center;
            border-radius: 4px;
        }
        
        /* Product Detail */
        .detail-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            padding: 60px 50px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .detail-gallery {
            position: sticky;
            top: 120px;
        }
        
        .detail-main-image {
            aspect-ratio: 3/4;
            background: var(--gray-100);
            margin-bottom: 15px;
            overflow: hidden;
        }
        
        .detail-main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .detail-info {
            padding-top: 20px;
        }
        
        .detail-brand {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }
        
        .detail-name {
            font-family: 'Gothic A1', sans-serif;
            font-size: 28px;
            font-weight: 900;
            margin-bottom: 20px;
            line-height: 1.3;
        }
        
        .detail-price {
            font-size: 26px;
            font-weight: 700;
            margin-bottom: 30px;
        }
        
        .detail-price .original {
            color: var(--gray-400);
            text-decoration: line-through;
            font-size: 20px;
            margin-right: 12px;
            font-weight: 400;
        }
        
        .detail-price .sale {
            color: var(--red);
        }
        
        .detail-desc {
            color: var(--gray-600);
            line-height: 1.8;
            margin-bottom: 35px;
            font-size: 15px;
        }
        
        .detail-actions {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .detail-actions .btn-primary {
            flex: 1;
        }
        
        .btn-wishlist {
            width: 54px;
            height: 54px;
            border: 2px solid var(--gray-300);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-wishlist:hover {
            border-color: var(--black);
        }
        
        .btn-wishlist.active {
            border-color: var(--red);
            color: var(--red);
        }
        
        .btn-wishlist.active svg {
            fill: var(--red);
            stroke: var(--red);
        }
        
        .detail-meta {
            padding-top: 25px;
            border-top: 1px solid var(--gray-200);
        }
        
        .detail-meta-item {
            display: flex;
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-200);
            font-size: 14px;
        }
        
        .detail-meta-item dt {
            width: 100px;
            color: var(--gray-600);
        }
        
        .detail-meta-item dd {
            flex: 1;
        }
        
        /* Cart */
        .cart-page {
            padding: 50px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .cart-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .cart-layout {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 50px;
        }
        
        .cart-item {
            display: grid;
            grid-template-columns: 100px 1fr auto;
            gap: 25px;
            padding: 25px 0;
            border-bottom: 1px solid var(--gray-200);
            align-items: center;
        }
        
        .cart-item-image {
            aspect-ratio: 3/4;
            background: var(--gray-100);
            overflow: hidden;
        }
        
        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .cart-item-brand {
            font-size: 12px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .cart-item-name {
            font-size: 14px;
            color: var(--gray-600);
            margin-bottom: 15px;
        }
        
        .cart-item-qty {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .qty-btn {
            width: 30px;
            height: 30px;
            border: 1px solid var(--gray-300);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: var(--white);
            font-size: 16px;
        }
        
        .cart-item-right {
            text-align: right;
        }
        
        .cart-item-price {
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .cart-item-remove {
            font-size: 13px;
            color: var(--gray-400);
            cursor: pointer;
        }
        
        .cart-summary {
            background: var(--gray-50);
            padding: 35px;
            height: fit-content;
            position: sticky;
            top: 120px;
        }
        
        .cart-summary h3 {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 25px;
        }
        
        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        .cart-summary-total {
            display: flex;
            justify-content: space-between;
            padding-top: 20px;
            margin-top: 10px;
            border-top: 2px solid var(--black);
            font-size: 18px;
            font-weight: 700;
        }
        
        .cart-summary .btn-primary {
            width: 100%;
            margin-top: 25px;
        }
        
        /* Board (QnA, Review) */
        .board-container {
            padding: 50px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .board-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .board-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .board-table th {
            padding: 15px;
            background: var(--gray-50);
            font-size: 13px;
            font-weight: 600;
            border-top: 2px solid var(--black);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .board-table td {
            padding: 18px 15px;
            font-size: 14px;
            border-bottom: 1px solid var(--gray-200);
            text-align: center;
        }
        
        .board-table td.title {
            text-align: left;
            cursor: pointer;
        }
        
        .board-table td.title:hover {
            text-decoration: underline;
        }
        
        .board-write-btn {
            padding: 12px 25px;
            background: var(--black);
            color: var(--white);
            font-size: 13px;
            font-weight: 600;
            border: none;
            cursor: pointer;
        }
        
        /* Wishlist */
        .wishlist-page {
            padding: 50px;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        /* My Page */
        .mypage-layout {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 50px;
            padding: 50px;
            max-width: 1300px;
            margin: 0 auto;
        }
        
        .mypage-nav {
            border-right: 1px solid var(--gray-200);
            padding-right: 30px;
        }
        
        .mypage-nav-item {
            padding: 12px 0;
            font-size: 15px;
            cursor: pointer;
            color: var(--gray-600);
            transition: color 0.3s;
        }
        
        .mypage-nav-item:hover,
        .mypage-nav-item.active {
            color: var(--black);
            font-weight: 600;
        }
        
        .mypage-content h2 {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 30px;
        }
        
        /* Status Badge */
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-pending { background: #fff3e0; color: #f57c00; }
        .status-confirmed { background: #e3f2fd; color: #1976d2; }
        .status-shipped { background: #e8f5e9; color: #2e7d32; }
        .status-completed { background: var(--gray-200); color: var(--gray-600); }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: var(--gray-600);
        }
        
        .empty-state h3 {
            font-size: 18px;
            margin-bottom: 10px;
            color: var(--black);
        }
        
        /* Admin Styles */
        .admin-layout {
            display: flex;
            min-height: 100vh;
        }
        
        .admin-sidebar {
            width: 250px;
            background: var(--black);
            color: var(--white);
            padding: 25px 0;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
        }
        
        .admin-logo {
            font-family: 'Gothic A1', sans-serif;
            font-size: 24px;
            font-weight: 900;
            padding: 0 25px 25px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 25px;
        }
        
        .admin-logo span {
            display: block;
            font-size: 11px;
            font-weight: 400;
            opacity: 0.5;
            margin-top: 5px;
        }
        
        .admin-nav { list-style: none; }
        
        .admin-nav-item {
            padding: 14px 25px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background 0.3s;
        }
        
        .admin-nav-item:hover { background: rgba(255,255,255,0.05); }
        .admin-nav-item.active { background: rgba(255,255,255,0.1); border-left: 3px solid var(--white); }
        
        .admin-main {
            flex: 1;
            margin-left: 250px;
            background: var(--gray-50);
            min-height: 100vh;
        }
        
        .admin-header {
            background: var(--white);
            padding: 20px 35px;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .admin-header h1 {
            font-size: 22px;
            font-weight: 700;
        }
        
        .admin-content {
            padding: 35px;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 35px;
        }
        
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: 8px;
        }
        
        .stat-card h3 {
            font-size: 12px;
            color: var(--gray-600);
            margin-bottom: 12px;
        }
        
        .stat-card .value {
            font-size: 32px;
            font-weight: 700;
        }
        
        .admin-table-container {
            background: var(--white);
            border-radius: 8px;
            overflow: hidden;
        }
        
        .admin-table-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-table-header h2 {
            font-size: 16px;
            font-weight: 700;
        }
        
        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .admin-table th {
            text-align: left;
            padding: 14px 20px;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-600);
            background: var(--gray-50);
            border-bottom: 1px solid var(--gray-200);
        }
        
        .admin-table td {
            padding: 18px 20px;
            font-size: 14px;
            border-bottom: 1px solid var(--gray-200);
        }
        
        .admin-table tr:hover { background: var(--gray-50); }
        
        .admin-table img {
            width: 45px;
            height: 60px;
            object-fit: cover;
            background: var(--gray-100);
        }
        
        .btn-admin {
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .btn-admin-primary {
            background: var(--black);
            color: var(--white);
            border: none;
        }
        
        .btn-admin-secondary {
            background: var(--white);
            color: var(--black);
            border: 1px solid var(--gray-300);
        }
        
        .btn-admin-danger {
            background: var(--red);
            color: var(--white);
            border: none;
        }
        
        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        
        .modal {
            background: var(--white);
            width: 100%;
            max-width: 550px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 35px;
            border-radius: 8px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-header h2 {
            font-size: 20px;
            font-weight: 700;
        }
        
        .modal-close {
            font-size: 24px;
            cursor: pointer;
            opacity: 0.5;
        }
        
        .modal-close:hover { opacity: 1; }
        
        /* Image Upload */
        .image-upload-area {
            border: 2px dashed var(--gray-300);
            border-radius: 8px;
            padding: 35px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: var(--gray-50);
            margin-bottom: 20px;
        }
        
        .image-upload-area:hover {
            border-color: var(--black);
            background: var(--white);
        }
        
        .image-preview-container {
            position: relative;
            display: inline-block;
        }
        
        .image-preview {
            max-width: 180px;
            max-height: 240px;
            object-fit: cover;
            border-radius: 4px;
        }
        
        .image-preview-remove {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 26px;
            height: 26px;
            background: var(--red);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 14px;
        }
        
        .upload-progress {
            margin-top: 12px;
        }
        
        .upload-progress-bar {
            height: 4px;
            background: var(--gray-200);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .upload-progress-fill {
            height: 100%;
            background: var(--black);
            transition: width 0.3s;
        }
        
        /* Search Modal */
        .search-modal {
            position: fixed;
            inset: 0;
            background: rgba(255,255,255,0.98);
            z-index: 2000;
            padding: 100px 50px;
        }
        
        .search-close {
            position: absolute;
            top: 30px;
            right: 40px;
            font-size: 30px;
            cursor: pointer;
        }
        
        .search-input-wrap {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .search-input {
            width: 100%;
            padding: 20px 0;
            border: none;
            border-bottom: 3px solid var(--black);
            font-size: 28px;
            font-weight: 600;
            outline: none;
        }
        
        .search-input::placeholder {
            color: var(--gray-400);
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .product-grid { grid-template-columns: repeat(3, 1fr); }
            .category-grid { grid-template-columns: repeat(2, 1fr); }
            .admin-stats { grid-template-columns: repeat(2, 1fr); }
            .detail-container { grid-template-columns: 1fr; }
        }
        
        @media (max-width: 768px) {
            .header-main { padding: 15px 20px; }
            .nav-menu { display: none; }
            .hero-title { font-size: 38px; }
            .section { padding: 50px 20px; }
            .product-grid { grid-template-columns: repeat(2, 1fr); gap: 20px 12px; }
            .category-grid { grid-template-columns: 1fr; padding: 0 20px; }
            .footer-content { grid-template-columns: 1fr; gap: 35px; }
            .cart-layout { grid-template-columns: 1fr; }
            .mypage-layout { grid-template-columns: 1fr; }
            .admin-sidebar { display: none; }
            .admin-main { margin-left: 0; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBiraK4MFYnXerJaiRAlTF7GtNoSWggyMM",
            authDomain: "replica-89a4d.firebaseapp.com",
            projectId: "replica-89a4d",
            storageBucket: "replica-89a4d.firebasestorage.app",
            messagingSenderId: "707110930733",
            appId: "1:707110930733:web:0663a763118b4522e22ba4"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        const storage = firebase.storage();
        
        const ADMIN_EMAIL = 'admin@replica.com';
    </script>
    
    <script type="text/babel">
        const { useState, useEffect, createContext, useContext, useRef } = React;
        
        // Context
        const AppContext = createContext();
        
        const AppProvider = ({ children }) => {
            const [user, setUser] = useState(null);
            const [isAdmin, setIsAdmin] = useState(false);
            const [loading, setLoading] = useState(true);
            const [cart, setCart] = useState([]);
            const [wishlist, setWishlist] = useState([]);
            const [currentPage, setCurrentPage] = useState('home');
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [products, setProducts] = useState([]);
            const [orders, setOrders] = useState([]);
            const [members, setMembers] = useState([]);
            const [reviews, setReviews] = useState([]);
            const [qnas, setQnas] = useState([]);
            const [toast, setToast] = useState(null);
            const [showSearch, setShowSearch] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            
            const showToast = (message, type = 'info') => {
                setToast({ message, type });
                setTimeout(() => setToast(null), 3000);
            };
            
            // Auth Observer
            useEffect(() => {
                const unsubscribe = auth.onAuthStateChanged(async (firebaseUser) => {
                    if (firebaseUser) {
                        try {
                            const userDoc = await db.collection('users').doc(firebaseUser.uid).get();
                            let userData = userDoc.data();
                            
                            if (!userData) {
                                const newUserData = {
                                    email: firebaseUser.email,
                                    name: firebaseUser.email.split('@')[0],
                                    phone: '',
                                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                                    orderCount: 0,
                                    totalSpent: 0,
                                    wishlist: []
                                };
                                await db.collection('users').doc(firebaseUser.uid).set(newUserData);
                                userData = newUserData;
                            }
                            
                            setUser({
                                uid: firebaseUser.uid,
                                email: firebaseUser.email,
                                name: userData?.name || firebaseUser.email.split('@')[0],
                                phone: userData?.phone || ''
                            });
                            
                            setIsAdmin(firebaseUser.email === ADMIN_EMAIL);
                            setWishlist(userData?.wishlist || []);
                            
                            const savedCart = localStorage.getItem(`cart_${firebaseUser.uid}`);
                            if (savedCart) setCart(JSON.parse(savedCart));
                        } catch (error) {
                            setUser({
                                uid: firebaseUser.uid,
                                email: firebaseUser.email,
                                name: firebaseUser.email.split('@')[0],
                                phone: ''
                            });
                            setIsAdmin(firebaseUser.email === ADMIN_EMAIL);
                        }
                    } else {
                        setUser(null);
                        setIsAdmin(false);
                        setCart([]);
                        setWishlist([]);
                    }
                    setLoading(false);
                });
                return () => unsubscribe();
            }, []);
            
            // Load Products
            useEffect(() => {
                const unsubscribe = db.collection('products')
                    .orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        setProducts(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                    });
                return () => unsubscribe();
            }, []);
            
            // Load Reviews
            useEffect(() => {
                const unsubscribe = db.collection('reviews')
                    .orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        setReviews(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                    });
                return () => unsubscribe();
            }, []);
            
            // Load QnAs
            useEffect(() => {
                const unsubscribe = db.collection('qnas')
                    .orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        setQnas(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                    });
                return () => unsubscribe();
            }, []);
            
            // Load Orders & Members (Admin)
            useEffect(() => {
                if (!isAdmin) return;
                
                const ordersUnsub = db.collection('orders').orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        setOrders(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                    });
                
                const membersUnsub = db.collection('users').orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        setMembers(snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() })));
                    });
                
                return () => { ordersUnsub(); membersUnsub(); };
            }, [isAdmin]);
            
            // Save Cart
            useEffect(() => {
                if (user) {
                    localStorage.setItem(`cart_${user.uid}`, JSON.stringify(cart));
                }
            }, [cart, user]);
            
            // Auth Functions
            const register = async (email, password, name, phone) => {
                const { user: firebaseUser } = await auth.createUserWithEmailAndPassword(email, password);
                await db.collection('users').doc(firebaseUser.uid).set({
                    email, name, phone,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    orderCount: 0, totalSpent: 0, wishlist: []
                });
                showToast('회원가입이 완료되었습니다!', 'success');
            };
            
            const login = async (email, password) => {
                await auth.signInWithEmailAndPassword(email, password);
                showToast('로그인되었습니다!', 'success');
            };
            
            const logout = async () => {
                await auth.signOut();
                setCurrentPage('home');
                showToast('로그아웃되었습니다.');
            };
            
            // Cart Functions
            const addToCart = (product) => {
                setCart(prev => {
                    const exists = prev.find(item => item.id === product.id);
                    if (exists) {
                        return prev.map(item => item.id === product.id ? {...item, qty: item.qty + 1} : item);
                    }
                    return [...prev, {...product, qty: 1}];
                });
                showToast('장바구니에 추가되었습니다!', 'success');
            };
            
            const removeFromCart = (productId) => setCart(prev => prev.filter(item => item.id !== productId));
            
            const updateQty = (productId, qty) => {
                if (qty < 1) return removeFromCart(productId);
                setCart(prev => prev.map(item => item.id === productId ? {...item, qty} : item));
            };
            
            const clearCart = () => setCart([]);
            
            // Wishlist Functions
            const toggleWishlist = async (productId) => {
                if (!user) {
                    showToast('로그인이 필요합니다.', 'error');
                    return;
                }
                
                const newWishlist = wishlist.includes(productId) 
                    ? wishlist.filter(id => id !== productId)
                    : [...wishlist, productId];
                
                setWishlist(newWishlist);
                await db.collection('users').doc(user.uid).update({ wishlist: newWishlist });
                
                showToast(wishlist.includes(productId) ? '관심상품에서 제거되었습니다.' : '관심상품에 추가되었습니다!', 'success');
            };
            
            // Navigation
            const navigate = (page, product = null) => {
                setCurrentPage(page);
                if (product) setSelectedProduct(product);
                window.scrollTo(0, 0);
            };
            
            // Image Upload
            const uploadImage = async (file, onProgress) => {
                const fileName = `${Date.now()}_${file.name.replace(/[^a-zA-Z0-9.]/g, '_')}`;
                const storageRef = storage.ref(`products/${fileName}`);
                
                return new Promise((resolve, reject) => {
                    const uploadTask = storageRef.put(file);
                    
                    uploadTask.on('state_changed',
                        (snapshot) => {
                            const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                            console.log('Upload progress:', progress);
                            if (onProgress) onProgress(progress);
                        },
                        (error) => {
                            console.error('Upload error:', error.code, error.message);
                            alert('업로드 실패: ' + error.message);
                            reject(error);
                        },
                        async () => {
                            try {
                                const downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                                console.log('Upload complete:', downloadURL);
                                resolve(downloadURL);
                            } catch (err) {
                                console.error('getDownloadURL error:', err);
                                reject(err);
                            }
                        }
                    );
                });
            };
            
            // Product CRUD
            const addProduct = async (data) => {
                await db.collection('products').add({ ...data, createdAt: firebase.firestore.FieldValue.serverTimestamp() });
                showToast('상품이 등록되었습니다!', 'success');
            };
            
            const updateProduct = async (id, data) => {
                await db.collection('products').doc(id).update(data);
                showToast('상품이 수정되었습니다!', 'success');
            };
            
            const deleteProduct = async (id) => {
                await db.collection('products').doc(id).delete();
                showToast('상품이 삭제되었습니다!', 'success');
            };
            
            // Order Functions
            const createOrder = async (orderData) => {
                await db.collection('orders').add({
                    ...orderData,
                    userId: user.uid,
                    userName: user.name,
                    userEmail: user.email,
                    status: 'pending',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                await db.collection('users').doc(user.uid).update({
                    orderCount: firebase.firestore.FieldValue.increment(1),
                    totalSpent: firebase.firestore.FieldValue.increment(orderData.total)
                });
                
                clearCart();
                showToast('주문이 완료되었습니다!', 'success');
            };
            
            const updateOrderStatus = async (orderId, status) => {
                await db.collection('orders').doc(orderId).update({ status });
                showToast('주문 상태가 변경되었습니다!', 'success');
            };
            
            const getUserOrders = async () => {
                if (!user) return [];
                const snapshot = await db.collection('orders')
                    .where('userId', '==', user.uid)
                    .orderBy('createdAt', 'desc')
                    .get();
                return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            };
            
            // Review & QnA
            const addReview = async (data) => {
                await db.collection('reviews').add({
                    ...data,
                    userId: user.uid,
                    userName: user.name,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                showToast('후기가 등록되었습니다!', 'success');
            };
            
            const addQna = async (data) => {
                await db.collection('qnas').add({
                    ...data,
                    userId: user.uid,
                    userName: user.name,
                    answered: false,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                showToast('문의가 등록되었습니다!', 'success');
            };
            
            // Get products by category
            const getProductsByCategory = (category) => {
                if (category === 'new') return products.slice(0, 12);
                if (category === 'brand') return products;
                return products.filter(p => p.category === category);
            };
            
            // Search products
            const searchProducts = (query) => {
                if (!query) return [];
                const q = query.toLowerCase();
                return products.filter(p => 
                    p.name?.toLowerCase().includes(q) || 
                    p.brand?.toLowerCase().includes(q)
                );
            };
            
            return (
                <AppContext.Provider value={{
                    user, isAdmin, loading,
                    register, login, logout,
                    cart, addToCart, removeFromCart, updateQty, clearCart,
                    wishlist, toggleWishlist,
                    currentPage, navigate, selectedProduct,
                    products, addProduct, updateProduct, deleteProduct, getProductsByCategory,
                    orders, createOrder, updateOrderStatus, getUserOrders,
                    members, reviews, qnas, addReview, addQna,
                    uploadImage,
                    showToast, toast,
                    showSearch, setShowSearch, searchQuery, setSearchQuery, searchProducts
                }}>
                    {children}
                </AppContext.Provider>
            );
        };
        
        const useApp = () => useContext(AppContext);
        
        // Icon Components
        const Icon = ({ name, size = 22, ...props }) => {
            useEffect(() => {
                lucide.createIcons();
            }, []);
            return <i data-lucide={name} style={{ width: size, height: size }} {...props}></i>;
        };
        
        // Toast Component
        const Toast = () => {
            const { toast } = useApp();
            if (!toast) return null;
            return <div className={`toast ${toast.type}`}>{toast.message}</div>;
        };
        
        // Loading Screen
        const LoadingScreen = () => (
            <div className="loading-screen">
                <div className="loading-logo">명동사</div>
                <div className="loading-spinner"></div>
            </div>
        );
        
        // Search Modal
        const SearchModal = () => {
            const { showSearch, setShowSearch, searchQuery, setSearchQuery, searchProducts, navigate } = useApp();
            const inputRef = useRef(null);
            const results = searchProducts(searchQuery);
            
            useEffect(() => {
                if (showSearch && inputRef.current) {
                    inputRef.current.focus();
                }
            }, [showSearch]);
            
            if (!showSearch) return null;
            
            return (
                <div className="search-modal">
                    <span className="search-close" onClick={() => { setShowSearch(false); setSearchQuery(''); }}>×</span>
                    <div className="search-input-wrap">
                        <input 
                            ref={inputRef}
                            type="text" 
                            className="search-input" 
                            placeholder="검색어를 입력하세요"
                            value={searchQuery}
                            onChange={(e) => setSearchQuery(e.target.value)}
                        />
                        {searchQuery && results.length > 0 && (
                            <div style={{marginTop: '30px'}}>
                                <p style={{marginBottom: '20px', color: 'var(--gray-600)'}}>검색결과 {results.length}개</p>
                                <div className="product-grid" style={{gridTemplateColumns: 'repeat(4, 1fr)'}}>
                                    {results.slice(0, 8).map(product => (
                                        <div key={product.id} className="product-card" onClick={() => { navigate('detail', product); setShowSearch(false); setSearchQuery(''); }}>
                                            <div className="product-image">
                                                <img src={product.image} alt={product.name} />
                                            </div>
                                            <div className="product-brand">{product.brand}</div>
                                            <div className="product-name">{product.name}</div>
                                            <div className="product-price">₩{Number(product.price).toLocaleString()}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                        {searchQuery && results.length === 0 && (
                            <p style={{marginTop: '30px', color: 'var(--gray-600)'}}>검색 결과가 없습니다.</p>
                        )}
                    </div>
                </div>
            );
        };
        
        // Header
        const Header = () => {
            const { user, logout, cart, wishlist, navigate, currentPage, isAdmin, setShowSearch } = useApp();
            
            useEffect(() => { lucide.createIcons(); });
            
            const navItems = [
                { id: 'new', label: '신상품' },
                { id: 'brand', label: '브랜드' },
                { id: 'clothing', label: '의류' },
                { id: 'shoes', label: '신발' },
                { id: 'bags', label: '가방' },
            ];
            
            return (
                <header className="header">
                    <div className="top-banner">전 상품 무료배송 | 교환/반품 무료</div>
                    <div className="header-main">
                        <div className="logo" onClick={() => navigate('home')}>명동사</div>
                        <nav className="nav-menu">
                            {navItems.map(item => (
                                <span 
                                    key={item.id}
                                    className={`nav-link ${currentPage === item.id ? 'active' : ''}`}
                                    onClick={() => navigate(item.id)}
                                >
                                    {item.label}
                                </span>
                            ))}
                        </nav>
                        <div className="header-actions">
                            <div className="header-icon" onClick={() => setShowSearch(true)}>
                                <i data-lucide="search"></i>
                            </div>
                            {user ? (
                                <>
                                    <div className="header-icon" onClick={() => navigate('wishlist')}>
                                        <i data-lucide="heart"></i>
                                        {wishlist.length > 0 && <span className="icon-badge">{wishlist.length}</span>}
                                    </div>
                                    <div className="header-icon" onClick={() => navigate('mypage')}>
                                        <i data-lucide="user"></i>
                                    </div>
                                    {isAdmin && (
                                        <div className="header-icon" onClick={() => navigate('admin')}>
                                            <i data-lucide="settings"></i>
                                        </div>
                                    )}
                                </>
                            ) : (
                                <div className="header-icon" onClick={() => navigate('login')}>
                                    <i data-lucide="user"></i>
                                </div>
                            )}
                            <div className="header-icon" onClick={() => navigate('cart')}>
                                <i data-lucide="shopping-bag"></i>
                                {cart.length > 0 && <span className="icon-badge">{cart.length}</span>}
                            </div>
                        </div>
                    </div>
                </header>
            );
        };
        
        // Footer
        const Footer = () => {
            const { navigate } = useApp();
            
            return (
                <footer className="footer">
                    <div className="footer-content">
                        <div>
                            <div className="footer-brand">명동사</div>
                            <p className="footer-desc">
                                세계적인 디자이너들의 엄선된 컬렉션.<br/>
                                시대를 초월한 스타일을 만나보세요.
                            </p>
                        </div>
                        <div>
                            <h4 className="footer-title">쇼핑하기</h4>
                            <ul className="footer-links">
                                <li onClick={() => navigate('new')}>신상품</li>
                                <li onClick={() => navigate('brand')}>브랜드</li>
                                <li onClick={() => navigate('clothing')}>의류</li>
                                <li onClick={() => navigate('shoes')}>신발</li>
                                <li onClick={() => navigate('bags')}>가방</li>
                            </ul>
                        </div>
                        <div>
                            <h4 className="footer-title">고객센터</h4>
                            <ul className="footer-links">
                                <li onClick={() => navigate('qna')}>Q&A 게시판</li>
                                <li onClick={() => navigate('reviews')}>후기 게시판</li>
                                <li>배송안내</li>
                                <li>교환/반품</li>
                                <li>자주 묻는 질문</li>
                            </ul>
                        </div>
                        <div>
                            <h4 className="footer-title">마이페이지</h4>
                            <ul className="footer-links">
                                <li onClick={() => navigate('mypage')}>내 정보</li>
                                <li onClick={() => navigate('mypage')}>주문내역</li>
                                <li onClick={() => navigate('wishlist')}>관심상품</li>
                            </ul>
                        </div>
                    </div>
                    <div className="footer-bottom">
                        <span>© 2025 명동사. All rights reserved.</span>
                        <span>개인정보처리방침 | 이용약관</span>
                    </div>
                </footer>
            );
        };
        
        // Product Card
        const ProductCard = ({ product }) => {
            const { navigate, wishlist, toggleWishlist } = useApp();
            const isWished = wishlist.includes(product.id);
            
            useEffect(() => { lucide.createIcons(); });
            
            return (
                <div className="product-card">
                    <div className="product-image" onClick={() => navigate('detail', product)}>
                        <img src={product.image} alt={product.name} />
                        {product.badge && <span className="product-badge">{product.badge}</span>}
                    </div>
                    <button 
                        className={`product-wishlist ${isWished ? 'active' : ''}`}
                        onClick={(e) => { e.stopPropagation(); toggleWishlist(product.id); }}
                    >
                        <i data-lucide="heart"></i>
                    </button>
                    <div onClick={() => navigate('detail', product)}>
                        <div className="product-brand">{product.brand}</div>
                        <div className="product-name">{product.name}</div>
                        <div className="product-price">
                            {product.salePrice ? (
                                <>
                                    <span className="original">₩{Number(product.price).toLocaleString()}</span>
                                    <span className="sale">₩{Number(product.salePrice).toLocaleString()}</span>
                                </>
                            ) : (
                                `₩${Number(product.price).toLocaleString()}`
                            )}
                        </div>
                    </div>
                </div>
            );
        };
        
        // Home Page
        const HomePage = () => {
            const { navigate, products } = useApp();
            
            return (
                <>
                    <section className="hero">
                        <div className="hero-content">
                            <p className="hero-subtitle">2025 겨울 컬렉션</p>
                            <h1 className="hero-title">겨울<br/>필수템</h1>
                            <p className="hero-desc">추위를 이기는 따뜻한 스타일</p>
                            <button className="btn-primary" onClick={() => navigate('new')}>
                                컬렉션 보기
                            </button>
                        </div>
                    </section>
                    
                    <section className="section">
                        <div className="section-header">
                            <h2 className="section-title">주간 베스트</h2>
                            <span className="view-all" onClick={() => navigate('new')}>전체보기 →</span>
                        </div>
                        {products.length > 0 ? (
                            <div className="product-grid">
                                {products.slice(0, 8).map(product => (
                                    <ProductCard key={product.id} product={product} />
                                ))}
                            </div>
                        ) : (
                            <div className="empty-state">
                                <h3>상품 준비 중</h3>
                                <p>곧 멋진 상품들이 등록됩니다.</p>
                            </div>
                        )}
                    </section>
                    
                    <div className="category-grid">
                        <div className="category-card" onClick={() => navigate('clothing')}>
                            <img src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=600" alt="의류" />
                            <div className="category-content">
                                <h3 className="category-name">의류</h3>
                                <p className="category-count">{products.filter(p => p.category === 'clothing').length} 상품</p>
                            </div>
                        </div>
                        <div className="category-card" onClick={() => navigate('shoes')}>
                            <img src="https://images.unsplash.com/photo-1460353581641-37baddab0fa2?w=600" alt="신발" />
                            <div className="category-content">
                                <h3 className="category-name">신발</h3>
                                <p className="category-count">{products.filter(p => p.category === 'shoes').length} 상품</p>
                            </div>
                        </div>
                        <div className="category-card" onClick={() => navigate('bags')}>
                            <img src="https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=600" alt="가방" />
                            <div className="category-content">
                                <h3 className="category-name">가방</h3>
                                <p className="category-count">{products.filter(p => p.category === 'bags').length} 상품</p>
                            </div>
                        </div>
                    </div>
                </>
            );
        };
        
        // Category Page
        const CategoryPage = ({ category }) => {
            const { getProductsByCategory, navigate } = useApp();
            const products = getProductsByCategory(category);
            
            const titles = {
                new: '신상품',
                brand: '브랜드',
                clothing: '의류',
                shoes: '신발',
                bags: '가방'
            };
            
            const descs = {
                new: '새롭게 입고된 상품들을 만나보세요',
                brand: '다양한 브랜드의 컬렉션',
                clothing: '스타일리시한 의류 컬렉션',
                shoes: '편안하고 세련된 신발',
                bags: '트렌디한 가방 컬렉션'
            };
            
            return (
                <>
                    <div className="page-header">
                        <h1 className="page-title">{titles[category]}</h1>
                        <p className="page-desc">{descs[category]}</p>
                    </div>
                    <section className="section">
                        <div className="filter-bar">
                            <span className="filter-count">{products.length}개 상품</span>
                            <div className="filter-sort">
                                <select>
                                    <option>최신순</option>
                                    <option>낮은 가격순</option>
                                    <option>높은 가격순</option>
                                </select>
                            </div>
                        </div>
                        {products.length > 0 ? (
                            <div className="product-grid">
                                {products.map(product => (
                                    <ProductCard key={product.id} product={product} />
                                ))}
                            </div>
                        ) : (
                            <div className="empty-state">
                                <h3>상품이 없습니다</h3>
                                <p>곧 새로운 상품이 등록됩니다.</p>
                            </div>
                        )}
                    </section>
                </>
            );
        };
        
        // Product Detail Page
        const DetailPage = () => {
            const { selectedProduct, products, addToCart, navigate, wishlist, toggleWishlist } = useApp();
            const product = selectedProduct || products[0];
            
            useEffect(() => { lucide.createIcons(); });
            
            if (!product) {
                return (
                    <div className="section empty-state">
                        <h3>상품을 찾을 수 없습니다</h3>
                        <button className="btn-primary" style={{marginTop: '20px'}} onClick={() => navigate('new')}>
                            상품 목록으로
                        </button>
                    </div>
                );
            }
            
            const isWished = wishlist.includes(product.id);
            
            return (
                <div className="detail-container">
                    <div className="detail-gallery">
                        <div className="detail-main-image">
                            <img src={product.image} alt={product.name} />
                        </div>
                    </div>
                    <div className="detail-info">
                        <div className="detail-brand">{product.brand}</div>
                        <h1 className="detail-name">{product.name}</h1>
                        <div className="detail-price">
                            {product.salePrice ? (
                                <>
                                    <span className="original">₩{Number(product.price).toLocaleString()}</span>
                                    <span className="sale">₩{Number(product.salePrice).toLocaleString()}</span>
                                </>
                            ) : (
                                `₩${Number(product.price).toLocaleString()}`
                            )}
                        </div>
                        <p className="detail-desc">
                            {product.description || '최고급 소재로 제작된 프리미엄 상품입니다. 세련된 디자인과 뛰어난 품질로 오래도록 사랑받을 아이템입니다.'}
                        </p>
                        <div className="detail-actions">
                            <button className="btn-primary" onClick={() => { addToCart(product); }}>
                                장바구니 담기
                            </button>
                            <button 
                                className={`btn-wishlist ${isWished ? 'active' : ''}`}
                                onClick={() => toggleWishlist(product.id)}
                            >
                                <i data-lucide="heart"></i>
                            </button>
                        </div>
                        <div className="detail-meta">
                            <dl className="detail-meta-item">
                                <dt>브랜드</dt>
                                <dd>{product.brand}</dd>
                            </dl>
                            <dl className="detail-meta-item">
                                <dt>카테고리</dt>
                                <dd>{product.category === 'clothing' ? '의류' : product.category === 'shoes' ? '신발' : product.category === 'bags' ? '가방' : '기타'}</dd>
                            </dl>
                            <dl className="detail-meta-item">
                                <dt>배송</dt>
                                <dd>무료배송 (1-3일 소요)</dd>
                            </dl>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Login Page
        const LoginPage = () => {
            const { login, navigate } = useApp();
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);
                try {
                    await login(email, password);
                    navigate(email === ADMIN_EMAIL ? 'admin' : 'home');
                } catch (err) {
                    setError(err.code === 'auth/user-not-found' ? '등록되지 않은 이메일입니다.' : 
                             err.code === 'auth/wrong-password' ? '비밀번호가 일치하지 않습니다.' : '로그인에 실패했습니다.');
                }
                setLoading(false);
            };
            
            return (
                <div className="auth-page">
                    <div className="auth-container">
                        <h1 className="auth-title">로그인</h1>
                        <p className="auth-subtitle">명동사에 오신 것을 환영합니다</p>
                        {error && <div className="auth-error">{error}</div>}
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">이메일</label>
                                <input type="email" className="form-input" value={email} onChange={(e) => setEmail(e.target.value)} required />
                            </div>
                            <div className="form-group">
                                <label className="form-label">비밀번호</label>
                                <input type="password" className="form-input" value={password} onChange={(e) => setPassword(e.target.value)} required />
                            </div>
                            <button type="submit" className="btn-submit" disabled={loading}>
                                {loading ? '로그인 중...' : '로그인'}
                            </button>
                        </form>
                        <p className="auth-link">
                            아직 회원이 아니신가요? <a onClick={() => navigate('register')}>회원가입</a>
                        </p>
                    </div>
                </div>
            );
        };
        
        // Register Page
        const RegisterPage = () => {
            const { register, navigate } = useApp();
            const [form, setForm] = useState({ name: '', email: '', password: '', phone: '' });
            const [error, setError] = useState('');
            const [loading, setLoading] = useState(false);
            
            const handleSubmit = async (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);
                try {
                    await register(form.email, form.password, form.name, form.phone);
                    navigate('home');
                } catch (err) {
                    setError(err.code === 'auth/email-already-in-use' ? '이미 사용 중인 이메일입니다.' : 
                             err.code === 'auth/weak-password' ? '비밀번호는 6자 이상이어야 합니다.' : '회원가입에 실패했습니다.');
                }
                setLoading(false);
            };
            
            return (
                <div className="auth-page">
                    <div className="auth-container">
                        <h1 className="auth-title">회원가입</h1>
                        <p className="auth-subtitle">명동사 회원이 되어주세요</p>
                        {error && <div className="auth-error">{error}</div>}
                        <form onSubmit={handleSubmit}>
                            <div className="form-group">
                                <label className="form-label">이름</label>
                                <input type="text" className="form-input" value={form.name} onChange={(e) => setForm({...form, name: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label className="form-label">이메일</label>
                                <input type="email" className="form-input" value={form.email} onChange={(e) => setForm({...form, email: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label className="form-label">비밀번호</label>
                                <input type="password" className="form-input" value={form.password} onChange={(e) => setForm({...form, password: e.target.value})} required />
                            </div>
                            <div className="form-group">
                                <label className="form-label">연락처</label>
                                <input type="tel" className="form-input" value={form.phone} onChange={(e) => setForm({...form, phone: e.target.value})} required />
                            </div>
                            <button type="submit" className="btn-submit" disabled={loading}>
                                {loading ? '가입 중...' : '회원가입'}
                            </button>
                        </form>
                        <p className="auth-link">
                            이미 회원이신가요? <a onClick={() => navigate('login')}>로그인</a>
                        </p>
                    </div>
                </div>
            );
        };
        
        // Cart Page
        const CartPage = () => {
            const { cart, updateQty, removeFromCart, navigate, user } = useApp();
            const total = cart.reduce((sum, item) => sum + (Number(item.salePrice) || Number(item.price)) * item.qty, 0);
            
            if (cart.length === 0) {
                return (
                    <div className="cart-page" style={{textAlign: 'center', paddingTop: '100px'}}>
                        <h1 className="auth-title">장바구니가 비어있습니다</h1>
                        <p style={{color: 'var(--gray-600)', marginTop: '15px', marginBottom: '35px'}}>
                            마음에 드는 상품을 담아보세요.
                        </p>
                        <button className="btn-primary" onClick={() => navigate('new')}>쇼핑 계속하기</button>
                    </div>
                );
            }
            
            return (
                <div className="cart-page">
                    <div className="cart-header">
                        <h1 className="page-title">장바구니</h1>
                    </div>
                    <div className="cart-layout">
                        <div>
                            {cart.map(item => (
                                <div key={item.id} className="cart-item">
                                    <div className="cart-item-image">
                                        <img src={item.image} alt={item.name} />
                                    </div>
                                    <div>
                                        <div className="cart-item-brand">{item.brand}</div>
                                        <div className="cart-item-name">{item.name}</div>
                                        <div className="cart-item-qty">
                                            <button className="qty-btn" onClick={() => updateQty(item.id, item.qty - 1)}>−</button>
                                            <span>{item.qty}</span>
                                            <button className="qty-btn" onClick={() => updateQty(item.id, item.qty + 1)}>+</button>
                                        </div>
                                    </div>
                                    <div className="cart-item-right">
                                        <div className="cart-item-price">₩{((Number(item.salePrice) || Number(item.price)) * item.qty).toLocaleString()}</div>
                                        <span className="cart-item-remove" onClick={() => removeFromCart(item.id)}>삭제</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="cart-summary">
                            <h3>주문 요약</h3>
                            <div className="cart-summary-row">
                                <span>상품금액</span>
                                <span>₩{total.toLocaleString()}</span>
                            </div>
                            <div className="cart-summary-row">
                                <span>배송비</span>
                                <span>무료</span>
                            </div>
                            <div className="cart-summary-total">
                                <span>총 결제금액</span>
                                <span>₩{total.toLocaleString()}</span>
                            </div>
                            <button className="btn-primary" onClick={() => user ? navigate('checkout') : navigate('login')}>
                                {user ? '주문하기' : '로그인 후 주문'}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Checkout Page
        const CheckoutPage = () => {
            const { cart, user, navigate, createOrder } = useApp();
            const total = cart.reduce((sum, item) => sum + (Number(item.salePrice) || Number(item.price)) * item.qty, 0);
            const [submitted, setSubmitted] = useState(false);
            const [loading, setLoading] = useState(false);
            const [form, setForm] = useState({ name: user?.name || '', phone: user?.phone || '', address: '', detail: '', note: '' });
            
            const handleSubmit = async () => {
                if (!form.name || !form.phone || !form.address) {
                    alert('필수 정보를 입력해주세요.');
                    return;
                }
                setLoading(true);
                await createOrder({
                    items: cart.map(item => ({
                        id: item.id, brand: item.brand, name: item.name,
                        price: item.price, salePrice: item.salePrice, qty: item.qty, image: item.image
                    })),
                    total,
                    shippingName: form.name,
                    shippingPhone: form.phone,
                    shippingAddress: `${form.address} ${form.detail}`,
                    note: form.note
                });
                setSubmitted(true);
                setLoading(false);
            };
            
            if (submitted) {
                return (
                    <div className="cart-page" style={{textAlign: 'center', paddingTop: '100px'}}>
                        <h1 className="auth-title">주문이 완료되었습니다!</h1>
                        <p style={{color: 'var(--gray-600)', marginTop: '15px', marginBottom: '35px'}}>
                            주문내역은 마이페이지에서 확인하실 수 있습니다.<br/>
                            결제는 별도 안내드립니다.
                        </p>
                        <button className="btn-primary" onClick={() => navigate('mypage')}>주문내역 보기</button>
                    </div>
                );
            }
            
            return (
                <div className="cart-page">
                    <div className="cart-header">
                        <h1 className="page-title">주문하기</h1>
                    </div>
                    <div className="cart-layout">
                        <div>
                            <h3 style={{fontSize: '16px', fontWeight: '700', marginBottom: '25px'}}>배송 정보</h3>
                            <div className="form-group">
                                <label className="form-label">수령인 *</label>
                                <input type="text" className="form-input" value={form.name} onChange={(e) => setForm({...form, name: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label className="form-label">연락처 *</label>
                                <input type="tel" className="form-input" value={form.phone} onChange={(e) => setForm({...form, phone: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label className="form-label">주소 *</label>
                                <input type="text" className="form-input" placeholder="주소를 입력하세요" value={form.address} onChange={(e) => setForm({...form, address: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label className="form-label">상세주소</label>
                                <input type="text" className="form-input" value={form.detail} onChange={(e) => setForm({...form, detail: e.target.value})} />
                            </div>
                            <div className="form-group">
                                <label className="form-label">배송 메모</label>
                                <textarea className="form-input" rows="3" value={form.note} onChange={(e) => setForm({...form, note: e.target.value})}></textarea>
                            </div>
                        </div>
                        <div className="cart-summary">
                            <h3>주문 상품</h3>
                            {cart.map(item => (
                                <div key={item.id} style={{display: 'flex', justifyContent: 'space-between', marginBottom: '12px', fontSize: '14px'}}>
                                    <span>{item.brand} x {item.qty}</span>
                                    <span>₩{((Number(item.salePrice) || Number(item.price)) * item.qty).toLocaleString()}</span>
                                </div>
                            ))}
                            <div className="cart-summary-total">
                                <span>총 결제금액</span>
                                <span>₩{total.toLocaleString()}</span>
                            </div>
                            <p style={{fontSize: '13px', color: 'var(--gray-600)', marginTop: '20px'}}>* 결제는 별도 안내 (계좌이체)</p>
                            <button className="btn-primary" onClick={handleSubmit} disabled={loading}>
                                {loading ? '처리 중...' : '주문 완료하기'}
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // Wishlist Page
        const WishlistPage = () => {
            const { wishlist, products, navigate } = useApp();
            const wishProducts = products.filter(p => wishlist.includes(p.id));
            
            return (
                <>
                    <div className="page-header">
                        <h1 className="page-title">관심상품</h1>
                        <p className="page-desc">{wishProducts.length}개의 상품</p>
                    </div>
                    <section className="section">
                        {wishProducts.length > 0 ? (
                            <div className="product-grid">
                                {wishProducts.map(product => (
                                    <ProductCard key={product.id} product={product} />
                                ))}
                            </div>
                        ) : (
                            <div className="empty-state">
                                <h3>관심상품이 없습니다</h3>
                                <p>하트를 눌러 관심상품을 추가해보세요.</p>
                                <button className="btn-primary" style={{marginTop: '20px'}} onClick={() => navigate('new')}>
                                    쇼핑하러 가기
                                </button>
                            </div>
                        )}
                    </section>
                </>
            );
        };
        
        // MyPage
        const MyPage = () => {
            const { user, navigate, getUserOrders, logout } = useApp();
            const [orders, setOrders] = useState([]);
            const [loading, setLoading] = useState(true);
            const [tab, setTab] = useState('orders');
            
            useEffect(() => {
                if (user) {
                    getUserOrders().then(data => { setOrders(data); setLoading(false); });
                }
            }, [user]);
            
            if (!user) { navigate('login'); return null; }
            
            const statusText = { pending: '주문확인중', confirmed: '결제완료', shipped: '배송중', completed: '배송완료' };
            
            return (
                <>
                    <div className="page-header">
                        <h1 className="page-title">마이페이지</h1>
                        <p className="page-desc">{user.name}님 안녕하세요</p>
                    </div>
                    <div className="mypage-layout">
                        <div className="mypage-nav">
                            <div className={`mypage-nav-item ${tab === 'orders' ? 'active' : ''}`} onClick={() => setTab('orders')}>주문내역</div>
                            <div className={`mypage-nav-item ${tab === 'profile' ? 'active' : ''}`} onClick={() => setTab('profile')}>내 정보</div>
                            <div className="mypage-nav-item" onClick={() => navigate('wishlist')}>관심상품</div>
                            <div className="mypage-nav-item" onClick={logout}>로그아웃</div>
                        </div>
                        <div className="mypage-content">
                            {tab === 'orders' && (
                                <>
                                    <h2>주문내역</h2>
                                    {loading ? (
                                        <div className="empty-state"><div className="loading-spinner"></div></div>
                                    ) : orders.length === 0 ? (
                                        <div className="empty-state">
                                            <h3>주문내역이 없습니다</h3>
                                            <p>첫 주문을 해보세요!</p>
                                        </div>
                                    ) : (
                                        orders.map(order => (
                                            <div key={order.id} style={{border: '1px solid var(--gray-200)', padding: '25px', marginBottom: '15px', borderRadius: '8px'}}>
                                                <div style={{display: 'flex', justifyContent: 'space-between', marginBottom: '15px'}}>
                                                    <span style={{fontWeight: '700'}}>{order.id.slice(0, 8).toUpperCase()}</span>
                                                    <span className={`status-badge status-${order.status}`}>{statusText[order.status]}</span>
                                                </div>
                                                <p style={{fontSize: '14px', color: 'var(--gray-600)', marginBottom: '8px'}}>
                                                    {order.createdAt?.toDate?.()?.toLocaleDateString() || '-'}
                                                </p>
                                                <p style={{fontSize: '14px'}}>{order.items?.map(i => i.brand).join(', ')}</p>
                                                <p style={{fontWeight: '600', marginTop: '12px'}}>₩{order.total?.toLocaleString()}</p>
                                            </div>
                                        ))
                                    )}
                                </>
                            )}
                            {tab === 'profile' && (
                                <>
                                    <h2>내 정보</h2>
                                    <div style={{maxWidth: '400px'}}>
                                        <div className="form-group">
                                            <label className="form-label">이름</label>
                                            <input type="text" className="form-input" value={user.name} readOnly />
                                        </div>
                                        <div className="form-group">
                                            <label className="form-label">이메일</label>
                                            <input type="email" className="form-input" value={user.email} readOnly />
                                        </div>
                                        <div className="form-group">
                                            <label className="form-label">연락처</label>
                                            <input type="tel" className="form-input" value={user.phone || '-'} readOnly />
                                        </div>
                                    </div>
                                </>
                            )}
                        </div>
                    </div>
                </>
            );
        };
        
        // QnA Board
        const QnaPage = () => {
            const { qnas, user, addQna, navigate, isAdmin } = useApp();
            const [showModal, setShowModal] = useState(false);
            const [form, setForm] = useState({ title: '', content: '' });
            
            const handleSubmit = async () => {
                if (!user) { navigate('login'); return; }
                if (!form.title || !form.content) { alert('제목과 내용을 입력해주세요.'); return; }
                await addQna(form);
                setShowModal(false);
                setForm({ title: '', content: '' });
            };
            
            return (
                <>
                    <div className="page-header">
                        <h1 className="page-title">Q&A 게시판</h1>
                        <p className="page-desc">상품에 대해 궁금한 점을 문의해주세요</p>
                    </div>
                    <div className="board-container">
                        <div className="board-header">
                            <span>총 {qnas.length}개의 문의</span>
                            <button className="board-write-btn" onClick={() => user ? setShowModal(true) : navigate('login')}>
                                문의하기
                            </button>
                        </div>
                        <table className="board-table">
                            <thead>
                                <tr>
                                    <th style={{width: '60px'}}>번호</th>
                                    <th>제목</th>
                                    <th style={{width: '100px'}}>작성자</th>
                                    <th style={{width: '100px'}}>날짜</th>
                                    <th style={{width: '80px'}}>상태</th>
                                </tr>
                            </thead>
                            <tbody>
                                {qnas.length === 0 ? (
                                    <tr><td colSpan="5" style={{padding: '50px', color: 'var(--gray-600)'}}>등록된 문의가 없습니다.</td></tr>
                                ) : (
                                    qnas.map((qna, idx) => (
                                        <tr key={qna.id}>
                                            <td>{qnas.length - idx}</td>
                                            <td className="title">{qna.title}</td>
                                            <td>{qna.userName}</td>
                                            <td>{qna.createdAt?.toDate?.()?.toLocaleDateString() || '-'}</td>
                                            <td><span className={`status-badge ${qna.answered ? 'status-completed' : 'status-pending'}`}>{qna.answered ? '답변완료' : '대기중'}</span></td>
                                        </tr>
                                    ))
                                )}
                            </tbody>
                        </table>
                    </div>
                    
                    {showModal && (
                        <div className="modal-overlay" onClick={() => setShowModal(false)}>
                            <div className="modal" onClick={e => e.stopPropagation()}>
                                <div className="modal-header">
                                    <h2>문의하기</h2>
                                    <span className="modal-close" onClick={() => setShowModal(false)}>×</span>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">제목</label>
                                    <input type="text" className="form-input" value={form.title} onChange={e => setForm({...form, title: e.target.value})} />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">내용</label>
                                    <textarea className="form-input" rows="6" value={form.content} onChange={e => setForm({...form, content: e.target.value})}></textarea>
                                </div>
                                <button className="btn-submit" onClick={handleSubmit}>등록하기</button>
                            </div>
                        </div>
                    )}
                </>
            );
        };
        
        // Review Board
        const ReviewPage = () => {
            const { reviews, user, addReview, navigate, products } = useApp();
            const [showModal, setShowModal] = useState(false);
            const [form, setForm] = useState({ productId: '', title: '', content: '', rating: 5 });
            
            const handleSubmit = async () => {
                if (!user) { navigate('login'); return; }
                if (!form.title || !form.content) { alert('제목과 내용을 입력해주세요.'); return; }
                await addReview(form);
                setShowModal(false);
                setForm({ productId: '', title: '', content: '', rating: 5 });
            };
            
            return (
                <>
                    <div className="page-header">
                        <h1 className="page-title">후기 게시판</h1>
                        <p className="page-desc">구매 후기를 남겨주세요</p>
                    </div>
                    <div className="board-container">
                        <div className="board-header">
                            <span>총 {reviews.length}개의 후기</span>
                            <button className="board-write-btn" onClick={() => user ? setShowModal(true) : navigate('login')}>
                                후기 작성
                            </button>
                        </div>
                        <table className="board-table">
                            <thead>
                                <tr>
                                    <th style={{width: '60px'}}>번호</th>
                                    <th>제목</th>
                                    <th style={{width: '80px'}}>평점</th>
                                    <th style={{width: '100px'}}>작성자</th>
                                    <th style={{width: '100px'}}>날짜</th>
                                </tr>
                            </thead>
                            <tbody>
                                {reviews.length === 0 ? (
                                    <tr><td colSpan="5" style={{padding: '50px', color: 'var(--gray-600)'}}>등록된 후기가 없습니다.</td></tr>
                                ) : (
                                    reviews.map((review, idx) => (
                                        <tr key={review.id}>
                                            <td>{reviews.length - idx}</td>
                                            <td className="title">{review.title}</td>
                                            <td>{'★'.repeat(review.rating || 5)}</td>
                                            <td>{review.userName}</td>
                                            <td>{review.createdAt?.toDate?.()?.toLocaleDateString() || '-'}</td>
                                        </tr>
                                    ))
                                )}
                            </tbody>
                        </table>
                    </div>
                    
                    {showModal && (
                        <div className="modal-overlay" onClick={() => setShowModal(false)}>
                            <div className="modal" onClick={e => e.stopPropagation()}>
                                <div className="modal-header">
                                    <h2>후기 작성</h2>
                                    <span className="modal-close" onClick={() => setShowModal(false)}>×</span>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">제목</label>
                                    <input type="text" className="form-input" value={form.title} onChange={e => setForm({...form, title: e.target.value})} />
                                </div>
                                <div className="form-group">
                                    <label className="form-label">평점</label>
                                    <select className="form-input" value={form.rating} onChange={e => setForm({...form, rating: Number(e.target.value)})}>
                                        <option value={5}>★★★★★ (5점)</option>
                                        <option value={4}>★★★★☆ (4점)</option>
                                        <option value={3}>★★★☆☆ (3점)</option>
                                        <option value={2}>★★☆☆☆ (2점)</option>
                                        <option value={1}>★☆☆☆☆ (1점)</option>
                                    </select>
                                </div>
                                <div className="form-group">
                                    <label className="form-label">내용</label>
                                    <textarea className="form-input" rows="6" value={form.content} onChange={e => setForm({...form, content: e.target.value})}></textarea>
                                </div>
                                <button className="btn-submit" onClick={handleSubmit}>등록하기</button>
                            </div>
                        </div>
                    )}
                </>
            );
        };
        
        // Admin Page (간략화)
        const AdminPage = () => {
            const { navigate, logout, products, orders, members, addProduct, updateProduct, deleteProduct, updateOrderStatus, uploadImage } = useApp();
            const [menu, setMenu] = useState('dashboard');
            const [showModal, setShowModal] = useState(false);
            const [editingProduct, setEditingProduct] = useState(null);
            const [form, setForm] = useState({ brand: '', name: '', price: '', salePrice: '', category: 'clothing', stock: '', image: '', description: '' });
            const [uploading, setUploading] = useState(false);
            const [uploadProgress, setUploadProgress] = useState(0);
            const fileInputRef = useRef(null);
            
            useEffect(() => { lucide.createIcons(); });
            
            const todayOrders = orders.filter(o => o.createdAt?.toDate?.()?.toDateString() === new Date().toDateString()).length;
            const totalRevenue = orders.reduce((sum, o) => sum + (o.total || 0), 0);
            const pendingOrders = orders.filter(o => o.status === 'pending').length;
            
            const handleFileUpload = async (file) => {
                if (!file || !file.type.startsWith('image/')) {
                    alert('이미지 파일만 업로드 가능합니다.');
                    return;
                }
                if (file.size > 5 * 1024 * 1024) {
                    alert('파일 크기는 5MB 이하여야 합니다.');
                    return;
                }
                setUploading(true);
                setUploadProgress(0);
                try {
                    const url = await uploadImage(file, (p) => setUploadProgress(p));
                    setForm({...form, image: url});
                    setUploading(false);
                } catch (e) {
                    console.error('Upload failed:', e);
                    alert('이미지 업로드에 실패했습니다. Firebase Storage 설정을 확인해주세요.\n\n에러: ' + e.message);
                    setUploading(false);
                }
            };
            
            const handleEdit = (product) => {
                setEditingProduct(product);
                setForm({ brand: product.brand || '', name: product.name || '', price: product.price || '', salePrice: product.salePrice || '', category: product.category || 'clothing', stock: product.stock || '', image: product.image || '', description: product.description || '' });
                setShowModal(true);
            };
            
            const handleNew = () => {
                setEditingProduct(null);
                setForm({ brand: '', name: '', price: '', salePrice: '', category: 'clothing', stock: '', image: '', description: '' });
                setShowModal(true);
            };
            
            const handleSubmit = async () => {
                if (!form.brand || !form.name || !form.price || !form.image) { alert('필수 항목을 입력해주세요.'); return; }
                const data = { ...form, price: Number(form.price), salePrice: form.salePrice ? Number(form.salePrice) : null, stock: Number(form.stock) || 0 };
                if (editingProduct) await updateProduct(editingProduct.id, data);
                else await addProduct(data);
                setShowModal(false);
            };
            
            const statusOptions = [
                { value: 'pending', label: '주문확인중' },
                { value: 'confirmed', label: '결제완료' },
                { value: 'shipped', label: '배송중' },
                { value: 'completed', label: '배송완료' },
            ];
            
            return (
                <div className="admin-layout">
                    <aside className="admin-sidebar">
                        <div className="admin-logo">명동사<span>관리자</span></div>
                        <ul className="admin-nav">
                            <li className={`admin-nav-item ${menu === 'dashboard' ? 'active' : ''}`} onClick={() => setMenu('dashboard')}>📊 대시보드</li>
                            <li className={`admin-nav-item ${menu === 'products' ? 'active' : ''}`} onClick={() => setMenu('products')}>🛍️ 상품관리</li>
                            <li className={`admin-nav-item ${menu === 'orders' ? 'active' : ''}`} onClick={() => setMenu('orders')}>📦 주문관리</li>
                            <li className={`admin-nav-item ${menu === 'members' ? 'active' : ''}`} onClick={() => setMenu('members')}>👥 회원관리</li>
                            <li className="admin-nav-item" onClick={() => navigate('home')}>🏠 쇼핑몰 이동</li>
                            <li className="admin-nav-item" onClick={logout}>🚪 로그아웃</li>
                        </ul>
                    </aside>
                    <main className="admin-main">
                        <div className="admin-header">
                            <h1>{menu === 'dashboard' ? '대시보드' : menu === 'products' ? '상품관리' : menu === 'orders' ? '주문관리' : '회원관리'}</h1>
                        </div>
                        <div className="admin-content">
                            {menu === 'dashboard' && (
                                <>
                                    <div className="admin-stats">
                                        <div className="stat-card"><h3>오늘 주문</h3><div className="value">{todayOrders}</div></div>
                                        <div className="stat-card"><h3>총 매출</h3><div className="value">₩{(totalRevenue / 10000).toFixed(0)}만</div></div>
                                        <div className="stat-card"><h3>대기 주문</h3><div className="value">{pendingOrders}</div></div>
                                        <div className="stat-card"><h3>총 회원</h3><div className="value">{members.length}</div></div>
                                    </div>
                                    <div className="admin-table-container">
                                        <div className="admin-table-header"><h2>최근 주문</h2></div>
                                        <table className="admin-table">
                                            <thead><tr><th>주문번호</th><th>고객</th><th>날짜</th><th>금액</th><th>상태</th></tr></thead>
                                            <tbody>
                                                {orders.slice(0, 5).map(order => (
                                                    <tr key={order.id}>
                                                        <td>{order.id.slice(0, 8).toUpperCase()}</td>
                                                        <td>{order.userName}</td>
                                                        <td>{order.createdAt?.toDate?.()?.toLocaleDateString() || '-'}</td>
                                                        <td>₩{order.total?.toLocaleString()}</td>
                                                        <td><span className={`status-badge status-${order.status}`}>{order.status}</span></td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                </>
                            )}
                            
                            {menu === 'products' && (
                                <>
                                    <div className="admin-table-container">
                                        <div className="admin-table-header">
                                            <h2>전체 상품 ({products.length})</h2>
                                            <button className="btn-admin btn-admin-primary" onClick={handleNew}>+ 상품 등록</button>
                                        </div>
                                        <table className="admin-table">
                                            <thead><tr><th>이미지</th><th>브랜드</th><th>상품명</th><th>가격</th><th>재고</th><th>관리</th></tr></thead>
                                            <tbody>
                                                {products.map(p => (
                                                    <tr key={p.id}>
                                                        <td><img src={p.image} alt="" /></td>
                                                        <td>{p.brand}</td>
                                                        <td>{p.name}</td>
                                                        <td>{p.salePrice ? <><s style={{color:'#999'}}>₩{Number(p.price).toLocaleString()}</s> <span style={{color:'var(--red)'}}>₩{Number(p.salePrice).toLocaleString()}</span></> : `₩${Number(p.price).toLocaleString()}`}</td>
                                                        <td>{p.stock || 0}</td>
                                                        <td>
                                                            <button className="btn-admin btn-admin-secondary" style={{marginRight: '8px'}} onClick={() => handleEdit(p)}>수정</button>
                                                            <button className="btn-admin btn-admin-danger" onClick={() => { if(window.confirm('삭제하시겠습니까?')) deleteProduct(p.id); }}>삭제</button>
                                                        </td>
                                                    </tr>
                                                ))}
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    {showModal && (
                                        <div className="modal-overlay" onClick={() => !uploading && setShowModal(false)}>
                                            <div className="modal" onClick={e => e.stopPropagation()}>
                                                <div className="modal-header">
                                                    <h2>{editingProduct ? '상품 수정' : '상품 등록'}</h2>
                                                    <span className="modal-close" onClick={() => !uploading && setShowModal(false)}>×</span>
                                                </div>
                                                <div className="form-group">
                                                    <label className="form-label">상품 이미지 URL *</label>
                                                    <p style={{fontSize: '12px', color: '#666', marginBottom: '10px', lineHeight: '1.6'}}>
                                                        💡 <a href="https://imgbb.com" target="_blank" rel="noopener" style={{color: '#1976d2', fontWeight: '600'}}>imgbb.com</a> 에서 이미지 업로드 → "직접 링크" 복사 → 붙여넣기
                                                    </p>
                                                    <input 
                                                        className="form-input" 
                                                        placeholder="https://i.ibb.co/xxxxx/image.jpg"
                                                        value={form.image} 
                                                        onChange={e => setForm({...form, image: e.target.value})} 
                                                    />
                                                    {form.image && (
                                                        <div style={{marginTop: '15px'}}>
                                                            <p style={{fontSize: '12px', color: '#666', marginBottom: '8px'}}>미리보기:</p>
                                                            <div className="image-preview-container">
                                                                <img 
                                                                    src={form.image} 
                                                                    className="image-preview" 
                                                                    onError={(e) => {e.target.style.display = 'none'}}
                                                                    onLoad={(e) => {e.target.style.display = 'block'}}
                                                                    style={{display: 'block'}}
                                                                />
                                                                <button className="image-preview-remove" onClick={() => setForm({...form, image: ''})}>×</button>
                                                            </div>
                                                        </div>
                                                    )}
                                                </div>
                                                <div className="form-group"><label className="form-label">브랜드 *</label><input className="form-input" value={form.brand} onChange={e => setForm({...form, brand: e.target.value})} /></div>
                                                <div className="form-group"><label className="form-label">상품명 *</label><input className="form-input" value={form.name} onChange={e => setForm({...form, name: e.target.value})} /></div>
                                                <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px'}}>
                                                    <div className="form-group"><label className="form-label">정가 *</label><input type="number" className="form-input" value={form.price} onChange={e => setForm({...form, price: e.target.value})} /></div>
                                                    <div className="form-group"><label className="form-label">할인가</label><input type="number" className="form-input" value={form.salePrice} onChange={e => setForm({...form, salePrice: e.target.value})} /></div>
                                                </div>
                                                <div style={{display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '15px'}}>
                                                    <div className="form-group"><label className="form-label">카테고리</label><select className="form-input" value={form.category} onChange={e => setForm({...form, category: e.target.value})}><option value="clothing">의류</option><option value="shoes">신발</option><option value="bags">가방</option></select></div>
                                                    <div className="form-group"><label className="form-label">재고</label><input type="number" className="form-input" value={form.stock} onChange={e => setForm({...form, stock: e.target.value})} /></div>
                                                </div>
                                                <div className="form-group"><label className="form-label">상품 설명</label><textarea className="form-input" rows="3" value={form.description} onChange={e => setForm({...form, description: e.target.value})}></textarea></div>
                                                <button className="btn-submit" onClick={handleSubmit}>{editingProduct ? '수정하기' : '등록하기'}</button>
                                            </div>
                                        </div>
                                    )}
                                </>
                            )}
                            
                            {menu === 'orders' && (
                                <div className="admin-table-container">
                                    <div className="admin-table-header"><h2>전체 주문 ({orders.length})</h2></div>
                                    <table className="admin-table">
                                        <thead><tr><th>주문번호</th><th>고객</th><th>상품</th><th>금액</th><th>날짜</th><th>상태</th></tr></thead>
                                        <tbody>
                                            {orders.map(order => (
                                                <tr key={order.id}>
                                                    <td>{order.id.slice(0, 8).toUpperCase()}</td>
                                                    <td>{order.userName}<br/><span style={{fontSize: '12px', color: '#999'}}>{order.shippingPhone}</span></td>
                                                    <td>{order.items?.length || 0}개</td>
                                                    <td>₩{order.total?.toLocaleString()}</td>
                                                    <td>{order.createdAt?.toDate?.()?.toLocaleDateString() || '-'}</td>
                                                    <td>
                                                        <select value={order.status} onChange={e => updateOrderStatus(order.id, e.target.value)} style={{padding: '6px 10px', border: '1px solid #ddd'}}>
                                                            {statusOptions.map(opt => <option key={opt.value} value={opt.value}>{opt.label}</option>)}
                                                        </select>
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            )}
                            
                            {menu === 'members' && (
                                <div className="admin-table-container">
                                    <div className="admin-table-header"><h2>전체 회원 ({members.length})</h2></div>
                                    <table className="admin-table">
                                        <thead><tr><th>이름</th><th>이메일</th><th>연락처</th><th>가입일</th><th>주문수</th><th>총 구매액</th></tr></thead>
                                        <tbody>
                                            {members.map(m => (
                                                <tr key={m.id}>
                                                    <td>{m.name}</td>
                                                    <td>{m.email}</td>
                                                    <td>{m.phone || '-'}</td>
                                                    <td>{m.createdAt?.toDate?.()?.toLocaleDateString() || '-'}</td>
                                                    <td>{m.orderCount || 0}</td>
                                                    <td>₩{(m.totalSpent || 0).toLocaleString()}</td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        };
        
        // Router
        const Router = () => {
            const { currentPage, isAdmin, loading } = useApp();
            
            if (loading) return <LoadingScreen />;
            if (currentPage === 'admin' && isAdmin) return <AdminPage />;
            
            const categoryPages = ['new', 'brand', 'clothing', 'shoes', 'bags'];
            
            const pages = {
                home: <HomePage />,
                login: <LoginPage />,
                register: <RegisterPage />,
                detail: <DetailPage />,
                cart: <CartPage />,
                checkout: <CheckoutPage />,
                wishlist: <WishlistPage />,
                mypage: <MyPage />,
                qna: <QnaPage />,
                reviews: <ReviewPage />,
            };
            
            let content;
            if (categoryPages.includes(currentPage)) {
                content = <CategoryPage category={currentPage} />;
            } else {
                content = pages[currentPage] || <HomePage />;
            }
            
            return (
                <>
                    <Header />
                    <main>{content}</main>
                    <Footer />
                    <SearchModal />
                </>
            );
        };
        
        // App
        const App = () => (
            <AppProvider>
                <Router />
                <Toast />
            </AppProvider>
        );
        
        ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
</body>
</html>
